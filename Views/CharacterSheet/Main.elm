module CharacterSheet.Main exposing (Flags, Model, Msg(..), init, initialModel, main, update, view)

import Accessibility as Html exposing (Html)
import Browser
import Common.Character as Character exposing (Character, characterDecoder)
import Html as ElmHtml
import Html.Attributes as Attr
import Html.Events exposing (onClick)
import Html.Extra
import Http
import Json.Decode as Decode exposing (Decoder)
import Json.Decode.Pipeline exposing (required, requiredAt)
import Json.Encode as Encode


main : Program Encode.Value Model Msg
main =
    Browser.element
        { init = init
        , view = view
        , update = update
        , subscriptions = \_ -> Sub.none
        }


init : Encode.Value -> ( Model, Cmd Msg )
init flags =
    update (Init flags) initialModel


initialModel : Model
initialModel =
    { httpConfig = { baseUrl = "", headers = [] }
    , errorMessage = Nothing
    , character = Character.empty
    }


type alias HttpConfig =
    { baseUrl : String
    , headers : List Http.Header
    }


type alias Model =
    { httpConfig : HttpConfig
    , errorMessage : Maybe String
    , character : Character
    }


type alias Flags =
    { httpConfig : HttpConfig
    , character : Character
    }


type Msg
    = Init Encode.Value
    | UpdateCharacter
    | CharacterUpdated (Result Http.Error Character)
    | NoOp


update : Msg -> Model -> ( Model, Cmd Msg )
update msg model =
    case msg of
        Init flagsJson ->
            case Decode.decodeValue flagsDecoder flagsJson of
                Ok flags ->
                    ( { model
                        | httpConfig = flags.httpConfig
                        , character = flags.character
                      }
                    , Cmd.none
                    )

                Err error ->
                    ( { model | errorMessage = Just (Decode.errorToString error) }, Cmd.none )

        UpdateCharacter ->
            ( model, updateCharacter model.character model.httpConfig )

        CharacterUpdated characterResult ->
            case characterResult of
                Ok character ->
                    ( { model | character = character }, Cmd.none )

                Err err ->
                    ( { model | errorMessage = Just "Failed to update character" }, Cmd.none )

        NoOp ->
            ( model, Cmd.none )


view : Model -> Html Msg
view model =
    Html.div [ Attr.class "main-wrap" ]
        [ case model.errorMessage of
            Just errorMessage ->
                Html.div [] [ Html.text errorMessage ]

            Nothing ->
                Html.Extra.nothing
        , Html.div [ Attr.class "charsheet", Attr.id "charDetails" ]
            [ Html.div [ Attr.class "status-effects" ]
                [ Html.span [ Attr.class "effect-item blinded", Attr.title "Blinded" ]
                    [ Html.i [ Attr.class "far fa-eye-slash" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item burned", Attr.title "Burned" ]
                    [ Html.i [ Attr.class "fal fa-fire-alt" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item charmed", Attr.title "Charmed" ]
                    [ Html.i [ Attr.class "fas fa-heart-broken" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item confused", Attr.title "Confused" ]
                    [ Html.i [ Attr.class "fas fa-question" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item defeaned", Attr.title "Defeaned" ]
                    [ Html.i [ Attr.class "fas fa-deaf" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item shocked", Attr.title "Electrified" ]
                    [ Html.i [ Attr.class "fal fa-bolt" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item frightened", Attr.title "Frightened" ]
                    [ Html.i [ Attr.class "far fa-surprise" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item grappled", Attr.title "Grappled" ]
                    [ Html.i [ Attr.class "fas fa-hand-rock" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item incapacitated", Attr.title "Incapacitated" ]
                    [ Html.i [ Attr.class "fas fa-tire-flat" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item invisible", Attr.title "Invisible" ]
                    [ Html.i [ Attr.class "fal fa-ghost" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item paralyzed", Attr.title "Paralyzed" ]
                    [ Html.i [ Attr.class "far fa-wheelchair" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item petrified", Attr.title "Petrified" ]
                    [ Html.i [ Attr.class "fas fa-scarecrow" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item poisoned", Attr.title "Poisoned" ]
                    [ Html.i [ Attr.class "fal fa-flask-poison" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item prone", Attr.title "Prone" ]
                    [ Html.i [ Attr.class "fas fa-male" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item restrained", Attr.title "Restrained" ]
                    [ Html.i [ Attr.class "fas fa-universal-access" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item stunned", Attr.title "Stunned" ]
                    [ Html.i [ Attr.class "fas fa-exclamation" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item unconscious", Attr.title "Unconscious" ]
                    [ Html.i [ Attr.class "far fa-snooze" ]
                        []
                    ]
                , Html.span [ Attr.class "effect-item exhausted", Attr.title "Exhausted" ]
                    [ Html.i [ Attr.class "far fa-tired" ]
                        []
                    ]
                ]
            , Html.div [ Attr.class "spell-slots" ]
                [ Html.div [ Attr.id "slotsLevel1" ]
                    [ Html.text "3" ]
                , Html.div [ Attr.id "slotsLevel2" ]
                    [ Html.text "5" ]
                , Html.div [ Attr.id "slotsLevel3" ]
                    [ Html.text "5" ]
                , Html.div [ Attr.id "slotsLevel4" ]
                    [ Html.text "5" ]
                , Html.div [ Attr.id "slotsLevel5" ]
                    [ Html.text "5" ]
                , Html.div [ Attr.id "slotsLevel6" ]
                    [ Html.text "4" ]
                , Html.div [ Attr.id "slotsLevel7" ]
                    [ Html.text "3" ]
                , Html.div [ Attr.id "slotsLevel8" ]
                    [ Html.text "2" ]
                , Html.div [ Attr.id "slotsLevel9" ]
                    [ Html.text "1" ]
                ]
            , Html.div [ Attr.class "header" ]
                [ Html.details [ Attr.class "charname" ]
                    [ Html.summary []
                        [ Html.span [ Attr.class "name-image", Attr.name "charname" ]
                            [ Html.img "" [ Attr.class "char-image", Attr.src "/Portals/0/OpenContent/Cropped/480/64fcd7acc937df03e8e0c973/moon-crop.png" ]
                            , Html.span [ Attr.class "char-name" ]
                                [ Html.text "Tsukuyomi" ]
                            ]
                        ]
                    ]
                , Html.section [ Attr.class "misc" ]
                    [ Html.ul []
                        [ Html.li []
                            [ Html.label [ Attr.for "classlevel" ]
                                [ Html.text "Class & Level" ]
                            , ElmHtml.input [ Attr.id "classlevel", Attr.name "classlevel", Attr.placeholder "Artificer 7", Attr.attribute "style" "display: none;", Attr.value "Demon Slayer 4" ]
                                []
                            , Html.div [ Attr.class "level-name" ]
                                [ Html.text "Demon Slayer "
                                , Html.span [ Attr.class "level-number", Attr.attribute "data-value" "4", Attr.title "Level 4 Demon Slayer" ]
                                    [ Html.text "4" ]
                                ]
                            ]
                        , Html.li []
                            [ Html.span [ Attr.class "label", Attr.for "background" ]
                                [ Html.text "Background" ]
                            , Html.span [ Attr.name "background" ]
                                [ Html.text "Gruul Anarch" ]
                            ]
                        , Html.li []
                            [ Html.span [ Attr.class "label", Attr.for "playername" ]
                                [ Html.text "Player Name" ]
                            , Html.span [ Attr.name "playername" ]
                                [ Html.text "Jimmy" ]
                            ]
                        , Html.li []
                            [ Html.span [ Attr.class "label", Attr.for "race" ]
                                [ Html.text "Race" ]
                            , Html.span [ Attr.name "race" ]
                                [ Html.text "Half-Elf (Moon)" ]
                            ]
                        , Html.li []
                            [ Html.span [ Attr.class "label", Attr.for "alignment" ]
                                [ Html.text "Alignment" ]
                            , Html.span [ Attr.name "alignment" ]
                                [ Html.text "Chaotic Good" ]
                            ]
                        , Html.li []
                            [ Html.span [ Attr.class "label", Attr.for "experiencepoints" ]
                                [ Html.text "Experience Points" ]
                            , Html.span [ Attr.name "experiencepoints" ]
                                [ Html.text "2,700" ]
                            ]
                        ]
                    ]
                ]
            , Html.div [ Attr.class "dnd-nav" ]
                [ Html.details [ Attr.class "dnd-nav--character", Attr.attribute "open" "open" ]
                    [ Html.summary []
                        [ Html.text "Character"
                        , Html.i [ Attr.class "fas fa-user-shield" ]
                            []
                        ]
                    ]
                , Html.details [ Attr.class "dnd-nav--abilities" ]
                    [ Html.summary []
                        [ Html.text "Abilities"
                        , Html.i [ Attr.class "fas fa-swords" ]
                            []
                        ]
                    ]
                , Html.details [ Attr.class "dnd-nav--spells" ]
                    [ Html.summary []
                        [ Html.text "Spells"
                        , Html.i [ Attr.class "fas fa-book-spells" ]
                            []
                        ]
                    ]
                , Html.details [ Attr.class "dnd-nav--cantrips" ]
                    [ Html.summary []
                        [ Html.text "Cantrips"
                        , Html.i [ Attr.class "fas fa-hand-holding-magic" ]
                            []
                        ]
                    ]
                , Html.details [ Attr.class "dnd-nav--guides" ]
                    [ Html.summary []
                        [ Html.text "Guides"
                        , Html.i [ Attr.class "fas fa-level-up" ]
                            []
                        ]
                    ]
                , Html.details [ Attr.class "dnd-nav--notes" ]
                    [ Html.summary []
                        [ Html.text "Notes"
                        , Html.i [ Attr.class "fas fa-file-edit" ]
                            []
                        ]
                    ]
                , Html.details [ Attr.class "dnd-nav--maps" ]
                    [ Html.summary []
                        [ Html.text "Maps"
                        , Html.i [ Attr.class "fas fa-map" ]
                            []
                        ]
                    ]
                ]
            , Html.div [ Attr.class "main-content main-abilities", Attr.attribute "style" "display: none;" ]
                [ Html.div [ Attr.class "content--wrapper" ]
                    [ Html.ul [ Attr.class "main-content--link" ]
                        [ Html.li []
                            [ Html.a [ Attr.href "#Action Surge" ]
                                [ Html.text "Action Surge" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#Breathing" ]
                                [ Html.text "Breathing" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#First Form: Full Moon" ]
                                [ Html.text "First Form: Full Moon" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#First Form: God of Fire" ]
                                [ Html.text "First Form: God of Fire" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#Weapon Fighting" ]
                                [ Html.text "Weapon Fighting" ]
                            ]
                        , Html.li [ Attr.class "dnd-back-to-top" ]
                            [ Html.a [ Attr.href "#characterCanvas", Attr.attribute "style" "text-align: center;" ]
                                [ Html.text "Top"
                                , Html.i [ Attr.class "fas fa-arrow-up", Attr.attribute "style" "margin-left: 0.5rem;" ]
                                    []
                                ]
                            ]
                        ]
                    , Html.ul [ Attr.class "main-content--images", Attr.id "image-bookmarks" ]
                        [ Html.li [ Attr.id "abilityWrap1" ]
                            [ Html.div [ Attr.id "ability1" ]
                                [ Html.h4 []
                                    [ Html.text "Action Surge" ]
                                , Html.p []
                                    [ Html.text "Starting at 2nd level, you can push yourself beyond your normal limits Attr.for Html.amoment. On your turn, you can take one additional action." ]
                                , Html.p []
                                    [ Html.text "Once you use this feature, you must finish Html.ashort rest before you can use it again. Starting at 17th level, you can use it twice before Html.arest, but only once on the same turn." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "abilityWrap0" ]
                            [ Html.div [ Attr.id "ability0" ]
                                [ Html.h4 []
                                    [ Html.text "Breathing" ]
                                , Html.p []
                                    [ Html.text "You begin to learn the basics of Html.aslayer, breathing is only the first step on Html.along staircase. On your turn, you can use Breathing as Html.abonus action." ]
                                , Html.p []
                                    [ Html.text "While Breathing, you gain the following benefits:" ]
                                , Html.ul []
                                    [ Html.li []
                                        [ Html.text "Gain temporary hit points equal to your demon slayer level + your Constitution modifier (minimum of 5)." ]
                                    , Html.li []
                                        [ Html.text "Breathing style techniques." ]
                                    , Html.li []
                                        [ Html.text "Advantage on Perception checks against fiends and undead." ]
                                    ]
                                , Html.p []
                                    [ Html.text "Your Breathing lasts Attr.for 1 minute (10 rounds). It ends early if you are knocked unconscious or you can end it on your turn as Html.abonus action. Some breathing techniques may end your breathing early." ]
                                , Html.p []
                                    [ Html.text "Once you have used Breathing the number of times shown Attr.for your demon slayer level in the Breathing column of the demon slayer table, you must finish Html.along rest before you can use Breathing again." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "fa-bookmark fas" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "abilityWrap3" ]
                            [ Html.div [ Attr.id "ability3" ]
                                [ Html.h4 []
                                    [ Html.text "First Form: Full Moon" ]
                                , Html.p []
                                    [ Html.text "The swordsman attacks with all his rage and strength with Html.aconcentrated slash against Html.acreature." ]
                                , Html.p []
                                    [ Html.text "Immediately after Html.asuccessful hit, you can use Html.abonus action to deal an extra 1d6 damage to the creature. The amount of extra damage increases as you gain levels, as shown in the last column of the table." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "fa-bookmark fas" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "abilityWrap4" ]
                            [ Html.div [ Attr.id "ability4" ]
                                [ Html.h4 []
                                    [ Html.text "First Form: God of Fire" ]
                                , Html.p []
                                    [ Html.text "The swordsman charges towards his opponent at high speed, initiating Html.asingle concentrated slash." ]
                                , Html.p []
                                    [ Html.text "Immediately after Html.asuccessful hit, you can use Html.abonus action to deal an extra 1d6 damage to the creature. The amount of extra damage increases as you gain levels, as shown in the last column of the table." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "abilityWrap2" ]
                            [ Html.div [ Attr.id "ability2" ]
                                [ Html.h4 []
                                    [ Html.text "Weapon Fighting" ]
                                , Html.p []
                                    [ Html.strong []
                                        [ Html.text "Great Weapon Fighting:" ]
                                    , Html.text "When you roll Html.a1 or 2 on Html.adamage die Attr.for an attack you make with Html.amelee weapon that you are wielding with two hands, you can reroll the die and must use the new roll, even if the new roll is Html.a1 or Html.a2. The weapon must have the Two-Handed or Versatile property Attr.for you to gain this benefit."
                                    ]
                                , Html.p []
                                    [ Html.strong []
                                        [ Html.text "Improved Critical:" ]
                                    , Html.text "Your weapon attacks score Html.acritical hit on Html.aroll of 19 or 20."
                                    ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "fa-bookmark fas" ]
                                    []
                                ]
                            ]
                        ]
                    ]
                ]
            , Html.div [ Attr.class "main-content main-spells", Attr.attribute "style" "display: none;" ]
                [ Html.div [ Attr.class "content--wrapper" ]
                    [ Html.ul [ Attr.class "main-content--link" ]
                        [ Html.li [ Attr.attribute "data-value" "1" ]
                            [ Html.a [ Attr.href "#Rape Whistle" ]
                                [ Html.text "Rape Whistle" ]
                            ]
                        , Html.li [ Attr.attribute "data-value" "2" ]
                            [ Html.a [ Attr.href "#Level 2 Spell" ]
                                [ Html.text "Level 2 Spell" ]
                            ]
                        , Html.li [ Attr.attribute "data-value" "5" ]
                            [ Html.a [ Attr.href "#Indifference" ]
                                [ Html.text "Indifference" ]
                            ]
                        , Html.li [ Attr.attribute "data-value" "7" ]
                            [ Html.a [ Attr.href "#Level 7 Spell" ]
                                [ Html.text "Level 7 Spell" ]
                            ]
                        , Html.li [ Attr.attribute "data-value" "9" ]
                            [ Html.a [ Attr.href "#Atomic Bomb" ]
                                [ Html.text "Atomic Bomb" ]
                            ]
                        , Html.li [ Attr.class "dnd-back-to-top", Attr.attribute "data-value" "99" ]
                            [ Html.a [ Attr.href "#characterCanvas", Attr.attribute "style" "text-align: center;" ]
                                [ Html.text "Top"
                                , Html.i [ Attr.class "fas fa-arrow-up", Attr.attribute "style" "margin-left: 0.5rem;" ]
                                    []
                                ]
                            ]
                        ]
                    , Html.ul [ Attr.class "main-content--images", Attr.id "image-bookmarks" ]
                        [ Html.li [ Attr.attribute "data-value" "1", Attr.id "spellWrap1" ]
                            [ Html.div [ Attr.id "spell1" ]
                                [ Html.span [ Attr.class "spell-header" ]
                                    [ Html.span [ Attr.class "spell-level" ]
                                        [ Html.text "Lvl. 1" ]
                                    , Html.h4 []
                                        [ Html.text "Rape Whistle" ]
                                    ]
                                , Html.p []
                                    [ Html.text "Deals 0d0 damage and alerts all creatures in Html.a1 mile radius." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.attribute "data-value" "2", Attr.id "spellWrap3" ]
                            [ Html.div [ Attr.id "spell3" ]
                                [ Html.span [ Attr.class "spell-header" ]
                                    [ Html.span [ Attr.class "spell-level" ]
                                        [ Html.text "Lvl. 2" ]
                                    , Html.h4 []
                                        [ Html.text "Level 2 Spell" ]
                                    ]
                                , Html.p []
                                    [ Html.text "level 2 spell details" ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.attribute "data-value" "5", Attr.id "spellWrap2" ]
                            [ Html.div [ Attr.id "spell2" ]
                                [ Html.span [ Attr.class "spell-header" ]
                                    [ Html.span [ Attr.class "spell-level" ]
                                        [ Html.text "Lvl. 5" ]
                                    , Html.h4 []
                                        [ Html.text "Indifference" ]
                                    ]
                                , Html.p []
                                    [ Html.text "No damage, only apathy." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.attribute "data-value" "7", Attr.id "spellWrap4" ]
                            [ Html.div [ Attr.id "spell4" ]
                                [ Html.span [ Attr.class "spell-header" ]
                                    [ Html.span [ Attr.class "spell-level" ]
                                        [ Html.text "Lvl. 7" ]
                                    , Html.h4 []
                                        [ Html.text "Level 7 Spell" ]
                                    ]
                                , Html.p []
                                    [ Html.text "Level 2 Spell details" ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.attribute "data-value" "9", Attr.id "spellWrap0" ]
                            [ Html.div [ Attr.id "spell0" ]
                                [ Html.span [ Attr.class "spell-header" ]
                                    [ Html.span [ Attr.class "spell-level" ]
                                        [ Html.text "Lvl. 9" ]
                                    , Html.h4 []
                                        [ Html.text "Atomic Bomb" ]
                                    ]
                                , Html.p []
                                    [ Html.text "Explosion deals 69d420 and causes 4d20 of damage per turn." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        ]
                    ]
                ]
            , Html.div [ Attr.class "main-content main-cantrips", Attr.attribute "style" "display: none;" ]
                [ Html.div [ Attr.class "content--wrapper" ]
                    [ Html.ul [ Attr.class "main-content--link" ]
                        [ Html.li []
                            [ Html.a [ Attr.href "#Fire Bolt" ]
                                [ Html.text "Fire Bolt" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#Produce Flame" ]
                                [ Html.text "Produce Flame" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#True Strike" ]
                                [ Html.text "True Strike" ]
                            ]
                        , Html.li [ Attr.class "dnd-back-to-top" ]
                            [ Html.a [ Attr.href "#characterCanvas", Attr.attribute "style" "text-align: center;" ]
                                [ Html.text "Top"
                                , Html.i [ Attr.class "fas fa-arrow-up", Attr.attribute "style" "margin-left: 0.5rem;" ]
                                    []
                                ]
                            ]
                        ]
                    , Html.ul [ Attr.class "main-content--images", Attr.id "image-bookmarks" ]
                        [ Html.li [ Attr.id "cantripWrap0" ]
                            [ Html.div [ Attr.id "cantrip0" ]
                                [ Html.h4 []
                                    [ Html.text "Fire Bolt" ]
                                , Html.p []
                                    [ Html.strong []
                                        [ Html.text "Casting Time: " ]
                                    , Html.text "1 action"
                                    , Html.br []
                                    , Html.strong []
                                        [ Html.text "Range:" ]
                                    , Html.text "120 feet"
                                    , Html.br []
                                    , Html.strong []
                                        [ Html.text "Duration:" ]
                                    , Html.text "Instantaneous"
                                    ]
                                , Html.p []
                                    [ Html.text "You hurl Html.amote of fire at Html.acreature or object within range. Make Html.aranged spell attack against the target. On Html.ahit, the Attr.target takes 1d10 fire damage. Html.aflammable object hit by this spell ignites if it isn't being worn or carried." ]
                                , Html.p []
                                    [ Html.text "This spell's damage increases by 1d10 when you reach 5th level (2d10), 11th level (3d10), and 17th level (4d10)." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "cantripWrap1" ]
                            [ Html.div [ Attr.id "cantrip1" ]
                                [ Html.h4 []
                                    [ Html.text "Produce Flame" ]
                                , Html.p []
                                    [ Html.strong []
                                        [ Html.text "Casting Time: " ]
                                    , Html.text "1 action"
                                    , Html.br []
                                    , Html.strong []
                                        [ Html.text "Range: " ]
                                    , Html.text "Self"
                                    , Html.br []
                                    , Html.strong []
                                        [ Html.text "Duration:" ]
                                    , Html.text "10 minutes"
                                    ]
                                , Html.p []
                                    [ Html.text "A flickering flame appears in your hand. The flame remains there Attr.for the duration and harms neither you nor your equipment. The flame sheds bright light in Html.a10-foot radius and dim light Attr.for an additional 10 feet. The spell ends if you dismiss it as an action or if you cast it again." ]
                                , Html.p []
                                    [ Html.text "You can also attack with the flame, although doing so ends the spell. When you cast this spell, or as an action on Html.alater turn, you can hurl the flame at Html.acreature within 30 feet of you. Make Html.aranged spell attack. On Html.ahit, the Attr.target takes 1d8 fire damage." ]
                                , Html.p []
                                    [ Html.text "This spell's damage increases by 1d8 when you reach 5th level (2d8), 11th level (3d8), and 17th level (4d8)." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "cantripWrap2" ]
                            [ Html.div [ Attr.id "cantrip2" ]
                                [ Html.h4 []
                                    [ Html.text "True Strike" ]
                                , Html.p []
                                    [ Html.strong []
                                        [ Html.text "Casting Time: " ]
                                    , Html.text "1 action"
                                    , Html.br []
                                    , Html.strong []
                                        [ Html.text "Range:" ]
                                    , Html.text "30 feet"
                                    , Html.br []
                                    , Html.strong []
                                        [ Html.text "Duration:" ]
                                    , Html.text "Concentration, up to 1 round"
                                    ]
                                , Html.p []
                                    [ Html.text "You extend your hand and point Html.afinger at Html.atarget in range. Your magic grants you Html.abrief insight into the target's defenses. On your next turn, you gain advantage on your first attack roll against the target, provided that this spell hasn't ended." ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        ]
                    ]
                ]
            , Html.div [ Attr.class "main-content main-guides", Attr.attribute "style" "display: none;" ]
                [ Html.div [ Attr.class "content--wrapper" ]
                    [ Html.ul [ Attr.class "main-content--link" ]
                        [ Html.li []
                            [ Html.a [ Attr.href "#Demon Slayer" ]
                                [ Html.text "Demon Slayer" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#Flame Breathing" ]
                                [ Html.text "Flame Breathing" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#Moon Breathing" ]
                                [ Html.text "Moon Breathing" ]
                            ]
                        , Html.li [ Attr.class "dnd-back-to-top" ]
                            [ Html.a [ Attr.href "#characterCanvas", Attr.attribute "style" "text-align: center;" ]
                                [ Html.text "Top"
                                , Html.i [ Attr.class "fas fa-arrow-up", Attr.attribute "style" "margin-left: 0.5rem;" ]
                                    []
                                ]
                            ]
                        ]
                    , Html.ul [ Attr.class "main-content--images", Attr.id "image-bookmarks" ]
                        [ Html.li [ Attr.id "guideWrap0" ]
                            [ Html.div [ Attr.id "guide0" ]
                                [ Html.h4 []
                                    [ Html.text "Demon Slayer" ]
                                , Html.p []
                                    [ Html.a [ Attr.href "https://www.gmbinder.com/share/-M9xscOarwUiHtkCeTJD", Attr.target "_blank" ]
                                        [ Html.text "Demon Slayer Guide" ]
                                    ]
                                , Html.table [ Attr.attribute "style" "width:100%" ]
                                    [ Html.thead []
                                        [ Html.tr []
                                            [ Html.th []
                                                [ Html.text "Level" ]
                                            , Html.th []
                                                [ Html.text "Proficiency Bonus" ]
                                            , Html.th []
                                                [ Html.text "Features" ]
                                            , Html.th []
                                                [ Html.text "Breathing" ]
                                            ]
                                        ]
                                    , Html.tbody []
                                        [ Html.tr []
                                            [ Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "+2" ]
                                            , Html.td []
                                                [ Html.text "Combat Stance, Breathing, Nichirin Blade" ]
                                            , Html.td []
                                                [ Html.text "1" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "+2" ]
                                            , Html.td []
                                                [ Html.text "Action Surge (one use),"
                                                , Html.br []
                                                , Html.text "Combat Stance Feature"
                                                ]
                                            , Html.td []
                                                [ Html.text "1" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "3rd" ]
                                            , Html.td []
                                                [ Html.text "+2" ]
                                            , Html.td []
                                                [ Html.text "Breathing Style" ]
                                            , Html.td []
                                                [ Html.text "2" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text "+2" ]
                                            , Html.td []
                                                [ Html.text "Ability Score Improvement" ]
                                            , Html.td []
                                                [ Html.text "2" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "Improved Breathing,"
                                                , Html.br []
                                                , Html.text "Extra Attack"
                                                ]
                                            , Html.td []
                                                [ Html.text "3" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "6th" ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "Ability Score Improvement" ]
                                            , Html.td []
                                                [ Html.text "3" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "7th" ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "Total Concentration Breathing" ]
                                            , Html.td []
                                                [ Html.text "4" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "8th" ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "Ability Score Improvement" ]
                                            , Html.td []
                                                [ Html.text "4" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "9th" ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "â€”" ]
                                            , Html.td []
                                                [ Html.text "5" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "10th" ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "Combat Stance Feature" ]
                                            , Html.td []
                                                [ Html.text "5" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "11th" ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "Extra Attack (2)" ]
                                            , Html.td []
                                                [ Html.text "6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "12th" ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "Ability Score Improvement" ]
                                            , Html.td []
                                                [ Html.text "6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "13th" ]
                                            , Html.td []
                                                [ Html.text "+5" ]
                                            , Html.td []
                                                [ Html.text "Path to the 5th Rank" ]
                                            , Html.td []
                                                [ Html.text "7" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "14th" ]
                                            , Html.td []
                                                [ Html.text "+5" ]
                                            , Html.td []
                                                [ Html.text "Ability Score Improvement" ]
                                            , Html.td []
                                                [ Html.text "7" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "15th" ]
                                            , Html.td []
                                                [ Html.text "+5" ]
                                            , Html.td []
                                                [ Html.text "Total Concentration Constant" ]
                                            , Html.td []
                                                [ Html.text "8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "16th" ]
                                            , Html.td []
                                                [ Html.text "+5" ]
                                            , Html.td []
                                                [ Html.text "Ability Score Improvement" ]
                                            , Html.td []
                                                [ Html.text "8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "17th" ]
                                            , Html.td []
                                                [ Html.text "+6" ]
                                            , Html.td []
                                                [ Html.text "Action Surge (two uses)" ]
                                            , Html.td []
                                                [ Html.text "9" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "18th" ]
                                            , Html.td []
                                                [ Html.text "+6" ]
                                            , Html.td []
                                                [ Html.text "Combat Stance Feature" ]
                                            , Html.td []
                                                [ Html.text "9" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "19th" ]
                                            , Html.td []
                                                [ Html.text "+6" ]
                                            , Html.td []
                                                [ Html.text "Ability Score Improvement" ]
                                            , Html.td []
                                                [ Html.text "10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "20th" ]
                                            , Html.td []
                                                [ Html.text "+6" ]
                                            , Html.td []
                                                [ Html.text "Extra Attack (3)" ]
                                            , Html.td []
                                                [ Html.text "10" ]
                                            ]
                                        ]
                                    ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "guideWrap2" ]
                            [ Html.div [ Attr.id "guide2" ]
                                [ Html.h4 []
                                    [ Html.text "Flame Breathing" ]
                                , Html.p []
                                    [ Html.a [ Attr.href "https://www.gmbinder.com/share/-MA0oCjwnrnaqa76D0BN", Attr.target "_blank" ]
                                        [ Html.text "Flame Guide" ]
                                    ]
                                , Html.table [ Attr.attribute "style" "width:100%" ]
                                    [ Html.thead []
                                        [ Html.tr []
                                            [ Html.th []
                                                [ Html.text "Level" ]
                                            , Html.th []
                                                [ Html.text "Technique" ]
                                            , Html.th []
                                                [ Html.text "Rank" ]
                                            , Html.th []
                                                [ Html.text "Extra" ]
                                            ]
                                        ]
                                    , Html.tbody []
                                        [ Html.tr []
                                            [ Html.td []
                                                [ Html.text "3rd" ]
                                            , Html.td []
                                                [ Html.text "First Form: God of Fire" ]
                                            , Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "1d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "1d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "Second Form: Eternal Flame" ]
                                            , Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "1d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "6th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "1d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "7th" ]
                                            , Html.td []
                                                [ Html.text "Third Form: Imposing Sun" ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "8th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "9th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "10th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "11th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "12th" ]
                                            , Html.td []
                                                [ Html.text "Fourth Form: Flame Tiger" ]
                                            , Html.td []
                                                [ Html.text "3nd" ]
                                            , Html.td []
                                                [ Html.text "1d10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "13th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "3rd" ]
                                            , Html.td []
                                                [ Html.text "1d10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "14th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "3rd" ]
                                            , Html.td []
                                                [ Html.text "1d10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "15th" ]
                                            , Html.td []
                                                [ Html.text "Fifth Form: The Last Kindle" ]
                                            , Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text "1d12" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "16th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text "1d12" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "17th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text "1d12" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "18th" ]
                                            , Html.td []
                                                [ Html.text "Sixth Form: Fire Demon" ]
                                            , Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "1d12" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "19th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "2d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "20th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "2d6" ]
                                            ]
                                        ]
                                    ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "guideWrap1" ]
                            [ Html.div [ Attr.id "guide1" ]
                                [ Html.h4 []
                                    [ Html.text "Moon Breathing" ]
                                , Html.p []
                                    [ Html.a [ Attr.href "https://www.gmbinder.com/share/-MA0ocM_fD0-xHnxay0a", Attr.target "_blank" ]
                                        [ Html.text "Moon Guide" ]
                                    ]
                                , Html.table [ Attr.attribute "style" "width:100%" ]
                                    [ Html.thead []
                                        [ Html.tr []
                                            [ Html.th []
                                                [ Html.text "Level" ]
                                            , Html.th []
                                                [ Html.text "Technique" ]
                                            , Html.th []
                                                [ Html.text "Rage" ]
                                            , Html.th []
                                                [ Html.text "Rank" ]
                                            , Html.th []
                                                [ Html.text "DMG" ]
                                            ]
                                        ]
                                    , Html.tbody []
                                        [ Html.tr []
                                            [ Html.td []
                                                [ Html.text "3rd" ]
                                            , Html.td []
                                                [ Html.text "First Form: Full Moon" ]
                                            , Html.td []
                                                [ Html.text "â€”" ]
                                            , Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "1d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "â€”" ]
                                            , Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "1d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "Second Form: Moongazing" ]
                                            , Html.td []
                                                [ Html.text "â€”" ]
                                            , Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "1d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "6th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "â€”" ]
                                            , Html.td []
                                                [ Html.text "1st" ]
                                            , Html.td []
                                                [ Html.text "1d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "7th" ]
                                            , Html.td []
                                                [ Html.text "Third Form: Endless Darkness" ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "8th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "9th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "10th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d8" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "11th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "2nd" ]
                                            , Html.td []
                                                [ Html.text "1d10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "12th" ]
                                            , Html.td []
                                                [ Html.text "Fourth Form: Crescent Moon" ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "3nd" ]
                                            , Html.td []
                                                [ Html.text "1d10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "13th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "3rd" ]
                                            , Html.td []
                                                [ Html.text "1d10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "14th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+3" ]
                                            , Html.td []
                                                [ Html.text "3rd" ]
                                            , Html.td []
                                                [ Html.text "1d10" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "15th" ]
                                            , Html.td []
                                                [ Html.text "Fifth Form: Perpetual Night" ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text "1d12" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "16th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text "1d12" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "17th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "4th" ]
                                            , Html.td []
                                                [ Html.text "1d12" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "18th" ]
                                            , Html.td []
                                                [ Html.text "Sixth Form: New Moon" ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "1d12" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "19th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "2d6" ]
                                            ]
                                        , Html.tr []
                                            [ Html.td []
                                                [ Html.text "20th" ]
                                            , Html.td []
                                                [ Html.text " " ]
                                            , Html.td []
                                                [ Html.text "+4" ]
                                            , Html.td []
                                                [ Html.text "5th" ]
                                            , Html.td []
                                                [ Html.text "2d6" ]
                                            ]
                                        ]
                                    ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        ]
                    ]
                ]
            , Html.div [ Attr.class "main-content main-notes", Attr.attribute "style" "display: none;" ]
                [ Html.div [ Attr.class "content--wrapper" ]
                    [ Html.div [ Attr.class "note-wrapper" ]
                        [ ElmHtml.textarea [ Attr.id "Tsukuyominotes1" ]
                            []
                        , ElmHtml.textarea [ Attr.id "Tsukuyominotes2" ]
                            []
                        ]
                    ]
                ]
            , Html.div [ Attr.class "main-content main-maps", Attr.attribute "style" "display: none;" ]
                [ Html.div [ Attr.class "content--wrapper" ]
                    [ Html.ul [ Attr.class "main-content--link" ]
                        [ Html.li []
                            [ Html.a [ Attr.href "#Barovia" ]
                                [ Html.text "Barovia" ]
                            ]
                        , Html.li []
                            [ Html.a [ Attr.href "#Distances" ]
                                [ Html.text "Distances" ]
                            ]
                        , Html.li [ Attr.class "dnd-back-to-top" ]
                            [ Html.a [ Attr.href "#characterCanvas", Attr.attribute "style" "text-align: center;" ]
                                [ Html.text "Top"
                                , Html.i [ Attr.class "fas fa-arrow-up", Attr.attribute "style" "margin-left: 0.5rem;" ]
                                    []
                                ]
                            ]
                        ]
                    , Html.ul [ Attr.class "main-content--images", Attr.id "image-bookmarks" ]
                        [ Html.li [ Attr.id "mapWrap0" ]
                            [ Html.div [ Attr.id "map0" ]
                                [ Html.h4 []
                                    [ Html.text "Barovia" ]
                                , Html.a [ Attr.href "/Portals/0/OpenContent/Files/480/barovia-full-1.jpg", Attr.target "_blank" ]
                                    [ Html.img "" [ Attr.src "/Portals/0/OpenContent/Files/480/barovia-full-1.jpg", Attr.title "Map of Barovia" ]
                                    ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        , Html.li [ Attr.id "mapWrap1" ]
                            [ Html.div [ Attr.id "map1" ]
                                [ Html.h4 []
                                    [ Html.text "Distances" ]
                                , Html.a [ Attr.href "/Portals/0/OpenContent/Files/480/barovia-distances.jpg", Attr.target "_blank" ]
                                    [ Html.img "" [ Attr.src "/Portals/0/OpenContent/Files/480/barovia-distances.jpg", Attr.title "Map of Distances" ]
                                    ]
                                ]
                            , Html.button [ Attr.class "bookmark-button", Attr.type_ "button" ]
                                [ Html.i [ Attr.class "far fa-bookmark" ]
                                    []
                                ]
                            ]
                        ]
                    ]
                ]
            , Html.div [ Attr.class "main main-content main-character", Attr.attribute "style" "" ]
                [ Html.section []
                    [ Html.section [ Attr.class "attributes" ]
                        [ Html.div [ Attr.class "scores" ]
                            [ Html.ul []
                                [ Html.li [ Attr.class "strength" ]
                                    [ Html.div [ Attr.class "score" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Strengthscore" ]
                                            [ Html.text "Strength" ]
                                        , ElmHtml.input [ Attr.class "stat", Attr.name "Strengthscore", Attr.placeholder "10", Attr.value "20" ]
                                            []
                                        ]
                                    , Html.div [ Attr.class "modifier" ]
                                        [ ElmHtml.input [ Attr.class "statmod", Attr.name "Strengthmod", Attr.placeholder "+0" ]
                                            []
                                        ]
                                    ]
                                , Html.li [ Attr.class "dexterity" ]
                                    [ Html.div [ Attr.class "score" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Dexterityscore" ]
                                            [ Html.text "Dexterity" ]
                                        , ElmHtml.input [ Attr.class "stat", Attr.name "Dexterityscore", Attr.placeholder "10", Attr.value "18" ]
                                            []
                                        ]
                                    , Html.div [ Attr.class "modifier" ]
                                        [ ElmHtml.input [ Attr.class "statmod/", Attr.name "Dexteritymod", Attr.placeholder "+0" ]
                                            []
                                        ]
                                    ]
                                , Html.li [ Attr.class "constitution" ]
                                    [ Html.div [ Attr.class "score" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Constitutionscore" ]
                                            [ Html.text "Constitution" ]
                                        , ElmHtml.input [ Attr.class "stat", Attr.name "Constitutionscore", Attr.placeholder "10", Attr.value "17" ]
                                            []
                                        ]
                                    , Html.div [ Attr.class "modifier" ]
                                        [ ElmHtml.input [ Attr.class "statmod", Attr.name "Constitutionmod", Attr.placeholder "+0" ]
                                            []
                                        ]
                                    ]
                                , Html.li [ Attr.class "wisdom" ]
                                    [ Html.div [ Attr.class "score" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Wisdomscore" ]
                                            [ Html.text "Wisdom" ]
                                        , ElmHtml.input [ Attr.class "stat", Attr.name "Wisdomscore", Attr.placeholder "10", Attr.value "11" ]
                                            []
                                        ]
                                    , Html.div [ Attr.class "modifier" ]
                                        [ ElmHtml.input [ Attr.name "Wisdommod", Attr.placeholder "+0" ]
                                            []
                                        ]
                                    ]
                                , Html.li [ Attr.class "intelligence" ]
                                    [ Html.div [ Attr.class "score" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Intelligencescore" ]
                                            [ Html.text "Intelligence" ]
                                        , ElmHtml.input [ Attr.class "stat", Attr.name "Intelligencescore", Attr.placeholder "10", Attr.value "11" ]
                                            []
                                        ]
                                    , Html.div [ Attr.class "modifier" ]
                                        [ ElmHtml.input [ Attr.class "statmod", Attr.name "Intelligencemod", Attr.placeholder "+0" ]
                                            []
                                        ]
                                    ]
                                , Html.li [ Attr.class "charisma" ]
                                    [ Html.div [ Attr.class "score" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Charismascore" ]
                                            [ Html.text "Charisma" ]
                                        , ElmHtml.input [ Attr.class "stat", Attr.name "Charismascore", Attr.placeholder "10", Attr.value "16" ]
                                            []
                                        ]
                                    , Html.div [ Attr.class "modifier" ]
                                        [ ElmHtml.input [ Attr.class "statmod", Attr.name "Charismamod", Attr.placeholder "+0" ]
                                            []
                                        ]
                                    ]
                                ]
                            ]
                        , Html.div [ Attr.class "attr-applications" ]
                            [ Html.div [ Attr.class "saves list-section box" ]
                                [ Html.ul []
                                    [ Html.li [ Attr.class "checked", Attr.title "Strength Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Strength-save" ]
                                            [ Html.text "Strength" ]
                                        , ElmHtml.input [ Attr.name "Strength-save", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Strength-save-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Dexterity Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Dexterity-save" ]
                                            [ Html.text "Dexterity" ]
                                        , ElmHtml.input [ Attr.name "Dexterity-save", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Dexterity-save-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Constitution Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Constitution-save" ]
                                            [ Html.text "Constitution" ]
                                        , ElmHtml.input [ Attr.name "Constitution-save", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Constitution-save-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Wisdom Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Wisdom-save" ]
                                            [ Html.text "Wisdom" ]
                                        , ElmHtml.input [ Attr.name "Wisdom-save", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Wisdom-save-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Intelligence Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Intelligence-save" ]
                                            [ Html.text "Intelligence" ]
                                        , ElmHtml.input [ Attr.name "Intelligence-save", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Intelligence-save-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Charisma Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Charisma-save" ]
                                            [ Html.text "Charisma" ]
                                        , ElmHtml.input [ Attr.name "Charisma-save", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Charisma-save-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    ]
                                ]
                            , Html.div [ Attr.class "skills list-section box" ]
                                [ Html.ul []
                                    [ Html.li [ Attr.class "checked", Attr.title "Dexterity Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Acrobatics" ]
                                            [ Html.text "Acrobatics "
                                            , Html.span [ Attr.class "skill dex" ]
                                                [ Html.text "(Dex)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Acrobatics-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Acrobatics-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Wisdom Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Animal Handling" ]
                                            [ Html.text "Animal Handling "
                                            , Html.span [ Attr.class "skill wis" ]
                                                [ Html.text "(Wis)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "AnimalHandling-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "AnimalHandling-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Intelligence Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Arcana" ]
                                            [ Html.text "Arcana "
                                            , Html.span [ Attr.class "skill int" ]
                                                [ Html.text "(Int)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Arcana-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Arcana-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Strength Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Athletics" ]
                                            [ Html.text "Athletics "
                                            , Html.span [ Attr.class "skill str" ]
                                                [ Html.text "(Str)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Athletics-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Athletics-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Charisma Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Deception" ]
                                            [ Html.text "Deception "
                                            , Html.span [ Attr.class "skill cha" ]
                                                [ Html.text "(Cha)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Deception-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Deception-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Intelligence Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "History" ]
                                            [ Html.text "History "
                                            , Html.span [ Attr.class "skill int" ]
                                                [ Html.text "(Int)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "History-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "History-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Wisdom Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Insight" ]
                                            [ Html.text "Insight "
                                            , Html.span [ Attr.class "skill wis" ]
                                                [ Html.text "(Wis)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Insight-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Insight-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Charisma Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Intimidation" ]
                                            [ Html.text "Intimidation "
                                            , Html.span [ Attr.class "skill cha" ]
                                                [ Html.text "(Cha)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Intimidation-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Intimidation-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Intelligence Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Investigation" ]
                                            [ Html.text "Investigation "
                                            , Html.span [ Attr.class "skill int" ]
                                                [ Html.text "(Int)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Investigation-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Investigation-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Wisdom Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Medicine" ]
                                            [ Html.text "Medicine "
                                            , Html.span [ Attr.class "skill wis" ]
                                                [ Html.text "(Wis)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Medicine-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Medicine-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Intelligence Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Nature" ]
                                            [ Html.text "Nature "
                                            , Html.span [ Attr.class "skill int" ]
                                                [ Html.text "(Int)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Nature-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Nature-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Wisdom Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Perception" ]
                                            [ Html.text "Perception "
                                            , Html.span [ Attr.class "skill wis" ]
                                                [ Html.text "(Wis)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Perception-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Perception-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Charisma Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Performance" ]
                                            [ Html.text "Performance "
                                            , Html.span [ Attr.class "skill cha" ]
                                                [ Html.text "(Cha)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Performance-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Performance-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Charisma Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Persuasion" ]
                                            [ Html.text "Persuasion "
                                            , Html.span [ Attr.class "skill cha" ]
                                                [ Html.text "(Cha)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Persuasion-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Persuasion-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Intelligence Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Religion" ]
                                            [ Html.text "Religion "
                                            , Html.span [ Attr.class "skill int" ]
                                                [ Html.text "(Int)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Religion-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "Religion-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.title "Dexterity Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Sleight of Hand" ]
                                            [ Html.text "Sleight of Hand "
                                            , Html.span [ Attr.class "skill dex" ]
                                                [ Html.text "(Dex)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "SleightofHand-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.name "SleightofHand-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Dexterity Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Stealth" ]
                                            [ Html.text "Stealth "
                                            , Html.span [ Attr.class "skill dex" ]
                                                [ Html.text "(Dex)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Stealth-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Stealth-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    , Html.li [ Attr.class "checked", Attr.title "Wisdom Modifier + Proficiency Bonus" ]
                                        [ Html.span [ Attr.class "label", Attr.for "Survival" ]
                                            [ Html.text "Survival "
                                            , Html.span [ Attr.class "skill wis" ]
                                                [ Html.text "(Wis)" ]
                                            ]
                                        , ElmHtml.input [ Attr.name "Survival-skill", Attr.placeholder "+0", Attr.type_ "text" ]
                                            []
                                        , ElmHtml.input [ Attr.attribute "checked" "", Attr.name "Survival-prof", Attr.type_ "checkbox" ]
                                            []
                                        ]
                                    ]
                                ]
                            ]
                        ]
                    ]
                , Html.section []
                    [ Html.section [ Attr.class "combat" ]
                        [ Html.div [ Attr.class "armorclass" ]
                            [ Html.div []
                                [ Html.span [ Attr.class "label", Attr.for "ac" ]
                                    [ Html.text "Armor Class" ]
                                , ElmHtml.input [ Attr.name "ac", Attr.placeholder "10", Attr.type_ "text", Attr.value "17" ]
                                    []
                                ]
                            ]
                        , Html.div [ Attr.class "initiative" ]
                            [ Html.div []
                                [ Html.span [ Attr.class "label", Attr.for "initiative" ]
                                    [ Html.text "Initiative" ]
                                , ElmHtml.input [ Attr.name "initiative", Attr.placeholder "+0", Attr.type_ "text" ]
                                    []
                                ]
                            ]
                        , Html.div [ Attr.class "speed" ]
                            [ Html.div []
                                [ Html.span [ Attr.class "label", Attr.for "speed" ]
                                    [ Html.text "Speed" ]
                                , ElmHtml.input [ Attr.name "speed", Attr.placeholder "30", Attr.type_ "text", Attr.value "30" ]
                                    []
                                ]
                            ]
                        , Html.div [ Attr.class "hp" ]
                            [ Html.div [ Attr.class "regular" ]
                                [ Html.div [ Attr.class "max" ]
                                    [ Html.label [ Attr.for "TsukuyomimaxHP" ]
                                        [ Html.text "Max HP" ]
                                    , ElmHtml.input [ Attr.id "TsukuyomimaxHP", Attr.name "maxhp", Attr.placeholder "10", Attr.type_ "text", Attr.value "42" ]
                                        []
                                    ]
                                , Html.div [ Attr.class "current" ]
                                    [ Html.label [ Attr.for "TsukuyomicurrentHP" ]
                                        [ Html.text "Current HP" ]
                                    , ElmHtml.input [ Attr.id "TsukuyomicurrentHP", Attr.name "currenthp", Attr.type_ "text" ]
                                        []
                                    , Html.div [ Attr.class "health-bar-container" ]
                                        [ Html.div [ Attr.class "health-bar", Attr.attribute "style" "background-color: rgb(145, 42, 42); transform: scaleY(0.952381);" ]
                                            []
                                        ]
                                    ]
                                ]
                            , Html.div [ Attr.class "hp-gained" ]
                                [ Html.label [ Attr.for "heal" ]
                                    [ Html.text "Healing "
                                    , Html.i [ Attr.class "fas fa-prescription-bottle-alt" ]
                                        []
                                    ]
                                , ElmHtml.input [ Attr.id "heal", Attr.name "heal", Attr.type_ "text" ]
                                    []
                                ]
                            , Html.div [ Attr.class "dmg-taken" ]
                                [ Html.label [ Attr.for "dmg" ]
                                    [ Html.text "Damage "
                                    , Html.i [ Attr.class "fas fa-claw-marks" ]
                                        []
                                    ]
                                , ElmHtml.input [ Attr.id "dmg", Attr.name "dmg", Attr.type_ "text" ]
                                    []
                                ]
                            , Html.div [ Attr.class "temporary" ]
                                [ Html.label [ Attr.for "TsukuyomitempHP" ]
                                    [ Html.text "Temporary HP" ]
                                , ElmHtml.input [ Attr.id "TsukuyomitempHP", Attr.name "temphp", Attr.type_ "text", Attr.value "0" ]
                                    []
                                ]
                            ]
                        , Html.div [ Attr.class "hitdice" ]
                            [ Html.div []
                                [ Html.div [ Attr.class "total" ]
                                    [ Html.label [ Attr.for "totalhd", Attr.attribute "onclick" "totalhd_clicked()" ]
                                        [ Html.text "Total" ]
                                    , ElmHtml.input [ Attr.id "totalhd", Attr.name "totalhd", Attr.placeholder "2d10", Attr.type_ "text", Attr.value "1d8 (or 5) + Constitution Modifier" ]
                                        []
                                    ]
                                , Html.div [ Attr.class "remaining", Attr.attribute "style" "display: none" ]
                                    [ Html.label [ Attr.for "remaininghd" ]
                                        [ Html.text "Hit Dice" ]
                                    , ElmHtml.input [ Attr.id "remaininghd", Attr.name "remaininghd", Attr.type_ "text" ]
                                        []
                                    ]
                                ]
                            ]
                        , Html.div [ Attr.class "deathsaves" ]
                            [ Html.div []
                                [ Html.div [ Attr.class "marks" ]
                                    [ Html.div [ Attr.class "deathfails" ]
                                        [ Html.span [ Attr.class "label fail" ]
                                            [ Html.text "Failures"
                                            , Html.i [ Attr.class "fas fa-times" ]
                                                []
                                            ]
                                        , Html.div [ Attr.class "bubbles" ]
                                            [ ElmHtml.input [ Attr.id "Tsukuyomideathfail1", Attr.name "deathfail1", Attr.type_ "checkbox" ]
                                                []
                                            , ElmHtml.input [ Attr.id "Tsukuyomideathfail2", Attr.name "deathfail2", Attr.type_ "checkbox" ]
                                                []
                                            , ElmHtml.input [ Attr.id "Tsukuyomideathfail3", Attr.name "deathfail3", Attr.type_ "checkbox" ]
                                                []
                                            ]
                                        ]
                                    , Html.div [ Attr.class "deathsuccesses" ]
                                        [ Html.span [ Attr.class "label success" ]
                                            [ Html.text "Successes"
                                            , Html.i [ Attr.class "fas fa-check" ]
                                                []
                                            ]
                                        , Html.div [ Attr.class "bubbles" ]
                                            [ ElmHtml.input [ Attr.id "Tsukuyomideathsuccess1", Attr.name "deathsuccess1", Attr.type_ "checkbox" ]
                                                []
                                            , ElmHtml.input [ Attr.id "Tsukuyomideathsuccess2", Attr.name "deathsuccess2", Attr.type_ "checkbox" ]
                                                []
                                            , ElmHtml.input [ Attr.id "Tsukuyomideathsuccess3", Attr.name "deathsuccess3", Attr.type_ "checkbox" ]
                                                []
                                            ]
                                        ]
                                    ]
                                ]
                            ]
                        ]
                    , Html.section [ Attr.class "equipment" ]
                        [ Html.div []
                            [ Html.span [ Attr.class "label" ]
                                [ Html.text "Equipment" ]
                            ]
                        ]
                    ]
                ]
            ]
        , Html.div [] [ Html.button [ onClick UpdateCharacter ] [ Html.text "Save Changes" ] ]
        ]


flagsDecoder : Decoder Flags
flagsDecoder =
    Decode.succeed Flags
        |> requiredAt [] httpConfigDecoder
        |> required "character" characterDecoder


httpConfigDecoder : Decoder HttpConfig
httpConfigDecoder =
    Decode.map2 HttpConfig
        (Decode.field "baseUrl" Decode.string)
        (Decode.field "headers" httpHeaderDecoder)


httpHeaderDecoder : Decode.Decoder (List Http.Header)
httpHeaderDecoder =
    let
        decoder : List ( String, String ) -> List Http.Header
        decoder headers =
            headers
                |> List.map (\( key, value ) -> Http.header key value)
    in
    Decode.keyValuePairs Decode.string
        |> Decode.map decoder


updateCharacter : Character -> HttpConfig -> Cmd Msg
updateCharacter character config =
    let
        body =
            Encode.object
                [ ( "character", Character.encodeCharacter character )
                ]
    in
    Http.request
        { method = "POST"
        , headers = config.headers
        , url = config.baseUrl ++ "/CharacterSheet/Update"
        , body = Http.jsonBody body
        , expect = Http.expectJson CharacterUpdated characterDecoder
        , timeout = Nothing
        , tracker = Nothing
        }
